document.addEventListener("DOMContentLoaded",function(){$("#topclientes").length>0&&(console.log("Prueba"),fetch("/top-usuarios").then(t=>t.json()).then(t=>{let e=t.map(a=>a.name),o=t.map(a=>a.total_puntos);var r={chart:{height:350,type:"bar",toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!1},series:[{name:"Puntos",data:o}],xaxis:{categories:e,max:Math.max(...o)+500},colors:["#4361ee"],title:{align:"center"}},s=new ApexCharts(document.querySelector("#topclientes"),r);s.render()}).catch(t=>console.error("Error al obtener datos:",t))),$("#total-usuarios").length>0&&fetch("/total-usuarios").then(t=>t.json()).then(t=>{$("#total-usuarios").text(t.total_usuarios)}).catch(t=>console.error("Error al obtener el total de usuarios:",t)),$("#total-productos-expirados").length>0&&fetch("/total-productos-expirados").then(t=>t.json()).then(t=>{$("#total-productos-expirados").text(t.total_productos_expirados)}).catch(t=>console.error("Error al obtener el total de productos expirados:",t)),$("#total-productos-stock-bajo").length>0&&fetch("/total-productos-stock-bajo").then(t=>t.json()).then(t=>{$("#total-productos-stock-bajo").text(t.total_productos_stock_bajo)}).catch(t=>console.error("Error al obtener el total de productos con stock bajo:",t)),$("#total-productos-por-vencer").length>0&&fetch("/total-productos-por-vencer").then(t=>t.json()).then(t=>{$("#total-productos-por-vencer").text(t.total_productos_por_vencer)}).catch(t=>console.error("Error al obtener el total de productos por vencer:",t)),$("#productos-stock-bajo").length>0&&fetch("/productos-stock-bajo").then(t=>t.json()).then(t=>{let e=$("#productos-stock-bajo table tbody");e.empty(),t.length===0?e.append('<tr><td colspan="4" class="text-center">No hay productos con stock bajo</td></tr>'):t.slice(0,8).forEach((o,r)=>{e.append(`
                            <tr class="datanew">
                                <td>${r+1}</td>
                                <td class="productimgname">
                                    ${o.Nombre_Producto}
                                </td>
                                <td>${o.Marca}</td>
                                <td>${o.Stock}</td>
                            </tr>
                        `)})}).catch(t=>console.error("Error al obtener productos con stock bajo:",t))});
